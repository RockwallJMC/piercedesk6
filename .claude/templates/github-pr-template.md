# GitHub Pull Request Template

Use this template when creating pull requests after all phases complete using `gh pr create`.

## Command

```bash
gh pr create \
  --title "Feature: {Feature Name}" \
  --body "$(cat <<'EOF'
## Summary
{Brief description of feature and business value - 2-3 sentences}

## Links
- Closes #{issue-number}
- INDEX: [INDEX-{feature}.md](docs/system/execution/INDEX-{feature}.md)
- Design: [phase1.1-{topic}.md](docs/system/design/phase1.1-{topic}.md)

## Changes
- {Change 1 with description} (Phase X.Y)
- {Change 2 with description} (Phase X.Y)
- {Change 3 with description} (Phase X.Y)
- Added {N} E2E tests with screenshots

## Verification Evidence

### Tests
```
âœ… All tests passing ({N}/{N})
{Paste actual test command output}
```

### Build
```
âœ… Build succeeded
{Paste actual build command output}
```

### Linting
```
âœ… Linting clean
{Paste actual lint command output}
```

### E2E Screenshots
See issue #{issue-number} for all test screenshots captured during verification.

## Phases Completed
- âœ… Phase 1.1: {Phase name}
- âœ… Phase 1.2: {Phase name}
- âœ… Phase 1.3: {Phase name}

## Test Coverage
- Unit tests: {N} tests added/modified
- Integration tests: {N} tests added/modified
- E2E tests: {N} scenarios covered

## Database Changes (if applicable)
- Tables: {list tables created/modified}
- Migrations: {list migration files}
- RLS policies: {describe policies added}

## API Changes (if applicable)
- New endpoints: {list endpoints}
- Modified endpoints: {list endpoints}
- Breaking changes: None / {describe breaking changes}

---
ðŸ¤– Generated by Claude Code
EOF
)"
```

## Template Variables

Replace these placeholders with actual values:

- `{Feature Name}` - Short, descriptive feature name
- `{Brief description...}` - Summary from INDEX Feature Overview
- `{issue-number}` - GitHub issue number (without #)
- `{feature}` - Kebab-case feature identifier
- `{topic}` - Design doc topic
- `{Change N}` - Specific change description with phase reference
- `{N}` - Actual numbers (test counts, file counts, etc.)
- `{Phase name}` - Phase title from INDEX

## Example

```bash
gh pr create \
  --title "Feature: User Profile Management" \
  --body "$(cat <<'EOF'
## Summary
Implements comprehensive user profile management including avatar uploads, settings, and user preferences. Authenticated users can now create, view, edit, and delete their profiles with full validation and security controls.

## Links
- Closes #123
- INDEX: [INDEX-user-profile.md](docs/system/execution/INDEX-user-profile.md)
- Design: [phase1.1-profile-schema.md](docs/system/design/phase1.1-profile-schema.md)

## Changes
- Added user_profiles table with RLS policies for multi-tenant isolation (Phase 1.1)
- Implemented profile form component with avatar upload using MUI (Phase 1.2)
- Created CRUD API endpoints for profile management (Phase 1.3)
- Added 12 E2E tests with screenshots

## Verification Evidence

### Tests
```
âœ… All tests passing (78/78)

$ npm test
PASS  tests/unit/profile-validation.test.js
PASS  tests/integration/profile-api.test.js
PASS  tests/e2e/profile-management.spec.js

Test Suites: 15 passed, 15 total
Tests:       78 passed, 78 total
```

### Build
```
âœ… Build succeeded

$ npm run build
âœ“ Compiled successfully
âœ“ 127 modules transformed
âœ“ Built in 12.3s
```

### Linting
```
âœ… Linting clean

$ npm run lint
âœ“ No linting errors found
```

### E2E Screenshots
See issue #123 for all test screenshots captured during verification.

## Phases Completed
- âœ… Phase 1.1: Database schema - user_profiles table with RLS
- âœ… Phase 1.2: Profile UI components
- âœ… Phase 1.3: API integration - CRUD endpoints

## Test Coverage
- Unit tests: 8 tests added
- Integration tests: 4 tests added
- E2E tests: 12 scenarios covered

## Database Changes
- Tables: user_profiles (id, user_id, avatar_url, preferences, created_at, updated_at)
- Migrations: 20260127_create_user_profiles.sql
- RLS policies: SELECT/INSERT/UPDATE/DELETE with organization_id isolation

## API Changes
- New endpoints: GET/POST/PUT/DELETE /api/profiles
- Modified endpoints: None
- Breaking changes: None

---
ðŸ¤– Generated by Claude Code
EOF
)"
```

## Pre-PR Verification

Before creating the PR, post final verification to the issue:

```bash
gh issue comment {issue-number} --body "ðŸŽ‰ **All Phases Complete - Creating PR**

Final Verification:
- [x] All tests passing (78/78)
- [x] Build succeeds
- [x] Linting clean
- [x] E2E tests complete with screenshots
- [x] Documentation updated

Opening pull request..."
```

## Post-PR Actions

After creating the PR:

1. Link PR back to issue:
   ```bash
   gh issue comment {issue-number} --body "ðŸ”— **Pull Request Created**

   PR #{pr-number}: Ready for review!"
   ```

2. Update INDEX frontmatter with `pr_number: "#{pr-number}"`

## Workflow Integration

This template is used in:
1. **Phase 7: Pull Request** section of DOCUMENTATION-GUIDE.md
2. After all phases complete and verification passes
3. Before requesting code review

## Quality Checklist

Before using this template, ensure:
- [ ] All phases in INDEX are marked complete
- [ ] /VERIFY-BEFORE-COMPLETE skill invoked and passed
- [ ] All verification command outputs captured
- [ ] Screenshots uploaded to repository and referenced in issue
- [ ] INDEX file is current and accurate
- [ ] As-built documentation drafted (if needed for review)
